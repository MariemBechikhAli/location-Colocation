"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(e){function n(e){if(e.hasInitialised)return!1;var n="ha-cookie-settings",t="functional",o=void 0,i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setCookie",value:function(e,n){if(!e||!n)throw new TypeError("CookieAccess.setCookie() requires a cookieType and cookieString");o[e]&&(document.cookie=n)}},{key:"getConsents",value:function(){return o}},{key:"getCookieTypes",value:function(){return Object.keys(o)}}]),e}(),s=function(){function e(){var t=this;_classCallCheck(this,e),this.adjustConsent=function(){t.handleConsent({functional:document.getElementById("gdpr-functional").checked},!0),window.edap.push(function(e){e.trigger("gdpr.consent.update",{consentsettings:decodeURIComponent(t.getConsentCookie())})})},this.removeBanner=function(){t.unregisterDomEventListeners(),t.bannerDOM.parentNode.removeChild(t.bannerDOM),t.bannerDOM=null},this.prepareBannerLaunch=function(){document.body?t.launchBanner(!1):t.registerDomEventListener(document,"DOMContentLoaded",function(){t.launchBanner(!1)})},this.launchBanner=function(n){if(t.bannerDOM||(document.body.insertBefore(t.bannerStyle(),document.body.firstChild),document.body.insertBefore(t.bannerWrapper(),document.body.firstChild),t.bannerDOM=document.getElementById("gdpr-banner")),n){var e=t.adjustMarkup();t.bannerDOM.innerHTML=e,t.bindAccept()}else t.bannerDOM.innerHTML=t.bannerMarkup(),t.bindEvents();t.bannerDOM.focus(),window.edap.push(function(e){e.trigger("gdpr.consent.loaded",{consentview:n?"cookie-settings":"info"})})},this.launchAdjust=function(){t.launchBanner(!0)},this.adjustMarkup=function(){var e=t.getConsentCookie(),n=(e?t.decodeCookie(e):{}).functional?"checked":"";return['<div class="GDPR__text">','<h4 id="GDPR__desc">'+t.i18n.adjustTitle+"</h4>",'<ul class="GDPR__ul">','<li class="GDPR__li"><input class="GDPR__checkbox" id="gdpr-functional" type="checkbox" '+n+' value="functional"/> <label class="GDPR__label" for="gdpr-functional">'+t.i18n.allowFunctional+"</label></li>",'</ul><button id="gdpr-accept" class="GDPR__btn">'+t.i18n.adjustCTA+"</button>","</div>"].join("")},this.i18n={adjustTitle:"Modifier les paramètres relatifs aux cookies",close:"Fermer",content:'Nous utilisons des cookies d’analyse, de personnalisation et de publicité. En continuant votre navigation, vous acceptez notre utilisation des cookies. Vous pouvez modifier vos paramètres <span><button aria-label="Modifier les paramètres relatifs aux cookies" class="GDPR__btn-link" id="gdpr-adjust">ici</button></span>.',adjustCTA:"Accepter",allowFunctional:"Accepter les cookies de fonctionnalité (utilisés pour le fonctionnement général de notre site Web)"},this.bannerDOM=null,this.queuedCallbacks=[],this.savedListeners=[],this.consentSet=!1,this.init()}return _createClass(e,[{key:"init",value:function(){if("undefined"!=typeof window){var e=this.getConsentCookie();this.cookieAccessApi=new i,this.isEuSite()?e?(this.consentSet=!0,o=this.decodeCookie(e)):(this.resetCookieConsents(),o[t]=!1,this.prepareBannerLaunch()):(this.resetCookieConsents(),this.handleConsent(o))}}},{key:"resetCookieConsents",value:function(){o={functional:!0},this.setConsentCookie()}},{key:"isEuSite",value:function(){return"1"===this.getEuSiteCookie()}},{key:"encodeCookie",value:function(e){var n=[];if(!e)return"";for(var t=Object.keys(e),o=0;o<t.length;o++)n.push(t[o]+":"+(e[t[o]]?1:0));return encodeURIComponent(n.join(";"))}},{key:"decodeCookie",value:function(e){var n={};if(!e)return{};try{for(var t=decodeURIComponent(e).split(";"),o=0;o<t.length;o++){var i=t[o].split(":");n[i[0]]="1"===i[1]}return n}catch(e){return{}}}},{key:"registerDomEventListener",value:function(e,n,t){e.addEventListener(n,t),this.savedListeners.push([e,n,t])}},{key:"unregisterDomEventListeners",value:function(){for(var e=void 0;this.savedListeners.length;)(e=this.savedListeners.shift())[0].removeEventListener(e[1],e[2])}},{key:"hasConsented",value:function(e){return"undefined"!=typeof document&&(e?o[e]:this.consentSet&&-1!==document.cookie.indexOf(""+n))}},{key:"handleConsent",value:function(e,n){o[t]=e.functional,this.setConsentCookie(),this.consentSet=!0,n&&this.removeBanner(),this.flushPushedQueueIfConsented()}},{key:"getConsentCookie",value:function(){return this.findCookie(n)}},{key:"getEuSiteCookie",value:function(){return this.findCookie("eu-site")}},{key:"findCookie",value:function(e){for(var n=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){for(var i=t[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n))return i.substring(n.length,i.length)}return null}},{key:"setConsentCookie",value:function(){var e=new Date;e.setDate(e.getDate()+365),document.cookie=n+"="+this.encodeCookie(o)+";expires="+e.toGMTString()+";path=/"}},{key:"bindEvents",value:function(){this.registerDomEventListener(document.getElementById("gdpr-adjust"),"click",this.launchAdjust),this.registerDomEventListener(document.getElementById("gdpr-close"),"click",this.removeBanner)}},{key:"bindAccept",value:function(){this.registerDomEventListener(document.getElementById("gdpr-accept"),"click",this.adjustConsent)}},{key:"bannerWrapper",value:function(){var e=document.createElement("div");return e.setAttribute("id","gdpr-banner"),e.setAttribute("tabIndex","-1"),e.setAttribute("class","GDPR"),e.setAttribute("role","dialog"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-describedby","GDPR__desc"),e}},{key:"bannerMarkup",value:function(){return['<div id="GDPR__desc" class="GDPR__text">'+this.i18n.content+"</div>",'<button aria-label="'+this.i18n.close+'" class="GDPR__btn-link" id="gdpr-close"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1 15L15 1m0 14L1 1" fill="none" stroke-linecap="round" stroke="#fff" stroke-width="1.5px" stroke-linejoin="round"/></svg></button>'].join("")}},{key:"bannerStyle",value:function(){var e=document.createElement("style");e.type="text/css";var n="\n.GDPR {\noutline:0;\nmax-width:100vw;\ndisplay:-webkit-box;\ndisplay:flex;\n-webkit-box-align:center;\nalign-items:center;\n-webkit-box-pack:justify;\njustify-content:space-between;\nbackground-color:#323f4d;\ncolor:#fff;\nwidth:100%;\npadding:12px 30px;\nz-index:1035;\n}\n.partner-nav .GDPR {\n    position: fixed;\n    bottom: 0;\n    left:0;\n    right:0;\n}\n.GDPR__text {\ntext-align:left;\npadding-right:8px;\n}\n.GDPR__btn {\nborder-radius:100px;\nbackground:#fff;\ncolor:#0067db;\npadding:4.5px 16px;\nfont-size:.8125rem;\nline-height:21px;\nborder:none;\nmargin-bottom:8px;\n}\n.GDPR__btn-link{\npadding:0;\ncolor:#fff;\ntext-decoration:underline;\nbackground:none;\nborder:none;\nbackground-color:transparent;\ndisplay:inline-block;\n}\n.GDPR__btn--link:hover {\ncolor:#fff;\n}\n.GDPR__ul {\nmargin:0;\npadding:0;\nlist-style:none;\n}\n.GDPR__li {\nmargin-bottom:12px;\nposition:relative;\n}\n.GDPR__label {\ncolor:#fff;\nmargin:0;\ndisplay:block;\nposition:relative;\ncursor:pointer;\npadding-left:28px;\n}\n.GDPR__label:before {\ncontent:'';\nposition:absolute;\nleft:0px;\ntop:2px;\nwidth:18px;\nheight:18px;\nborder:1px solid #fff;\nborder-radius:4px;\nbackground:transparent;\n}\n.GDPR__checkbox {\nopacity:0;\nposition:absolute;\n}\n.GDPR__checkbox:checked {\nbackground:#fff;\nbox-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05), inset 15px 10px -12px rgba(255,255,255,0.1);\n}\n.GDPR__checkbox:checked + .GDPR__label:before {\nbackground:#fff;\n}\n.GDPR__checkbox:checked + .GDPR__label:after {\ncontent:'';\nposition:absolute;\nleft:4px;\ntop:10px;\nbackground:#323f4d;\nwidth:2px;\nheight:2px;\nbox-shadow: 2px 0 0 #323f4d, 4px 0 0 #323f4d, 4px -2px 0 #323f4d, 4px -4px 0 #323f4d, 4px -6px 0 #323f4d, 4px -8px 0 #323f4d;\n-webkit-transform:rotate(45deg);\ntransform:rotate(45deg);\n}\n.GDPR__checkbox:focus + .GDPR__label:before {\nbox-shadow: 0 0 0 2px #228ae6;\n}\n@media (max-width: 767px) {\n.GDPR {\npadding:8px 20px;\nfont-size:12px;\nline-height:1.5em;\n}\n@media (min-width: 1200px) {\n.GDPR__text {\nwidth:65%\n}\n}\n";return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),e}},{key:"processPushedCommand",value:function(e){"function"==typeof e&&e(this.cookieAccessApi)}},{key:"flushPushedQueueIfConsented",value:function(){if(this.hasConsented())for(;0<this.queuedCallbacks.length;)this.processPushedCommand(this.queuedCallbacks.shift())}}]),e}();window.edap=window.edap||[];var r=new s;Array.isArray(e)&&(r.queuedCallbacks=e.slice(0)),window.cookieconsent=[],window.cookieconsent.gdpr=r,window.cookieconsent.push=function(e){r.hasConsented()?r.processPushedCommand(e):r.queuedCallbacks.push(e)},r.flushPushedQueueIfConsented(),window.cookieconsent.hasInitialised=!0}"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n),n(e)}(window.cookieconsent||[]);